<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tienda Dinámica</title>
  <style>
    /* Estilos generales */
    .producto { cursor: pointer; margin: 10px; padding: 10px; border: 1px solid #ccc; }
    #detalles-producto { display: none; margin-top: 20px; }
  </style>
</head>
<body>
  <!-- Lista de productos (página principal) -->
  <div id="lista-productos">
    <h1>Productos Disponibles</h1>
    <div class="producto" data-id="1">Producto 1</div>
    <div class="producto" data-id="2">Producto 2</div>
    <div class="producto" data-id="3">Producto 3</div>
  </div>

  <!-- Detalles del producto (subpágina dinámica) -->
  <div id="detalles-producto">
    <button onclick="volver()">← Volver</button>
    <h2 id="titulo-producto"></h2>
    <p id="descripcion-producto"></p>
    <img id="imagen-producto" src="" alt="">
  </div>

  <script>
    // Base de datos simulada de productos
    const productos = {
      1: {
        nombre: "Laptop Gaming",
        descripcion: "Una laptop potente para juegos",
        imagen: "https://ejemplo.com/laptop.jpg"
      },
      2: {
        nombre: "Smartphone",
        descripcion: "Teléfono de última generación",
        imagen: "https://ejemplo.com/phone.jpg"
      },
      3: {
        nombre: "Auriculares",
        descripcion: "Calidad de sonido premium",
        imagen: "https://ejemplo.com/headphones.jpg"
      }
    };

    // Mostrar detalles del producto
    document.querySelectorAll('.producto').forEach(item => {
      item.addEventListener('click', () => {
        const id = item.dataset.id;
        history.pushState({}, '', `?producto=${id}`); // Actualiza URL
        cargarProducto(id);
      });
    });

    // Cargar producto desde parámetro URL
    function cargarProducto(id) {
      const producto = productos[id];
      if (producto) {
        document.getElementById('lista-productos').style.display = 'none';
        document.getElementById('detalles-producto').style.display = 'block';
        document.getElementById('titulo-producto').textContent = producto.nombre;
        document.getElementById('descripcion-producto').textContent = producto.descripcion;
        document.getElementById('imagen-producto').src = producto.imagen;
      }
    }

    // Volver a la lista
    function volver() {
      history.pushState({}, '', window.location.pathname);
      document.getElementById('detalles-productos').style.display = 'none';
      document.getElementById('lista-productos').style.display = 'block';
    }

    // Cargar producto al recargar la página
    window.addEventListener('load', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const idProducto = urlParams.get('producto');
      if (idProducto) cargarProducto(idProducto);
    });

    // Manejar navegación con botones adelante/atrás
    window.addEventListener('popstate', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const idProducto = urlParams.get('producto');
      if (!idProducto) {
        document.getElementById('detalles-producto').style.display = 'none';
        document.getElementById('lista-productos').style.display = 'block';
      }
    });
  </script>
</body>
</html>